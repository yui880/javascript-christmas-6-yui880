# 구현 기능 목록 - 크리스마스 프로모션 

## 주제 
> 크리스마스 할인 프로모션 : 고객들에게 구매 목록에 따른 할인 이벤트 결과를 제공하는 프로그램 

---
## 프로그램 흐름 
1. 식당 방문 날짜 입력받기 (잘못된 입력인 경우 재입력)
2. 주문할 메뉴와 개수 입력받기 (잘못된 입력인 경우 재입력)
3. 주문 메뉴 출력하기
4. 주문 메뉴에 따른 총주문 금액 출력하기 
5. 주문 금액과 메뉴, 날짜에 따라서 적용되는 할인 이벤트 확인하기 
6. 적용되는 증정 이벤트에 따라서 증정품 구하기
7. 적용되는 할인 이벤트에 따라서 각 할인 금액 구하기
8. 적용되는 할인,증정 이벤트의 이름과 할인 금액 출력하기 
9. 총 혜택 금액 계산하고 출력하기 (할인 금액 + 증정품 가격)
10. 할인 후 예상 결제 금액 계산하고 출력하기 (총 금액 - 할인 금액)
11. 총 혜택 금액에 따른 뱃지 출력하기 
12. 프로그램 종료 


---
## 기능 목록 
### 주문하기
- [x] 식당 방문 날짜 입력받기 
- [x] 주문할 메뉴와 개수 입력받기 
  - [x] 입력값을 주문할 메뉴와 개수로 분리해서 각각의 메뉴와 개수를 저장하기 
- [x] 주문 메뉴 출력하기 (메뉴 이름, 개수 출력)

### 주문 금액 계산하기
- [x] 각 주문 메뉴의 가격을 더해서 할인 전 총 주문 금액 구하기 
- [x] 총 주문 금액 출력하기 

### 증정 이벤트 
- [x] 총 주문 금액을 바탕으로 증정 이벤트 구하기
    - [x] 총 금액 12만원 이상이면 샴페인 한개 증정 -> 해당 금액 저장
- [x] 증정 이벤트 결과 출력하기

### 할인 이벤트
- [x] 총 주문 금액과 날짜를 기반으로 적용 가능한 할인 이벤트 구하기 
  - [x] 총 주문 금액이 10000원 이하인 경우 할인 이벤트 적용되지 않음 
  - [x] 크리스마스 디데이 이벤트가 적용 가능한 날짜인지
    - [x] 가능하면 할인 금액 구하기
  - [x] 평일 할인이 가능한 날짜인지 -> 주문 중 디저트 메뉴가 있는지 
    - [x] 디저트 메뉴의 개수를 기반으로 할인 금액 구하기 
  - [x] 주말 할인이 가능한 날짜인지 -> 주문 중 메인메뉴가 있는지 
    - [x] 메인 메뉴의 개수를 기반으로 할인 금액 구하기 
  - [x] 특별 할인이 가능한 날짜인지 -> 별이 표시된 날짜인지 
    - [x] 할인 금액 구하기 (1000원)
- [x] 적용되는 할인 이벤트와 할인 금액을 저장하기
- [x] 할인 이벤트 결과와 할인 금액 출력하기

### 총 혜택
- [x] 할인 이벤트에 의해 받은 할인 금액의 합 구하기 
- [x] 증정되는 증정품의 금액 구하기 
- [x] 할인과 증정으로 얻을 수 있는 총 혜택 금액 구하고 출력하기 
- [x] 할인 후 예상 금액 출력하기 

### 이벤트 배지 
- [x] 혜택 금액을 기반으로 이벤트 배지 구하고 출력하기


---
## 예외 목록 
- 방문 날짜 
  - [x] 1-31 사이의 숫자가 아니면 예외 발생 
  - [x] 정수가 아니면 예외 발생

- 주문 메뉴와 개수
  - [x] 메뉴의 수량이 숫자가 아니면 예외 발생
  - [x] 음료만 주문시 예외 발생(구매 불가능) 
  - [x] 메뉴판에 있는 메뉴가 아니면 예외 발생 
  - [x] 각 메뉴의 개수가 1개 이상이 아니면 예외 발생 
  - [x] 총 주문 개수가 20개 초과인 경우 예외 발생
  - [x] 메뉴의 형식이 올바르지 않으면 예외 발생(메뉴이름-개수)
  - [x] 중복된 메뉴를 입력한 경우 예외 발생

---
## 요구사항 체크리스트
- 요구 사항 메일에 작성된 요소 중 확인해야 하는 요소에 대해서 작성
- '어떤 값을 출력해야 한다'와 같은 사항은 작성하지 않았음 -> 헷갈릴만한 요구사항에 대해서만 작성
- 테스트 목록에서 해당 요소가 확인 되었는지 확인 할 수 있음

<details>
<summary>기능 요구 사항</summary>

### Day
1. - [x] 날짜 입력값이 1-31 범위의 숫자가 아니면 에러 메세지를 출력했는가? 
2. - [x] 날짜 입력값에 대한 에러메세지가 '[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요.'임을 확인했는가? 


### Product
1. - [x] 메뉴 입력값에 메뉴판에 없는 메뉴 입력시 에러 메세지를 출력했는가?
2. - [x] 메뉴의 개수가 1 미만의 숫자가 입력시 에러 메세지를 출력했는가?
3. - [x] 메뉴 형식이 예시와 다른 경우 에러 메세지를 출력했는가?
4. - [x] 중복 메뉴를 입력한 경우 에러 메세지를 출력했는가?
5. - [x] 메뉴 입력값에 대한 에러 메세지가 '[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요'임을 확인했는가?
6. - [x] 음료만 주문시 주문할 수 없음을 확인했는가?
7. - [x] 메뉴는 한 번에 최대 20개까지만 주문 할 수 있음을 확인했는가?

  
### Gift
1. - [x] 증정 이벤트의 기준이 '할인 전 총추문 금액'임을 확인했는가?


### Discount
1. - [x] 크리스마스 디데이 할인 기간을(1-25) 확인했는가?
2. - [x] 평일 할인은 일요일부터 목요일까지임을 확인했는가?
3. - [x] 주말 할인은 금요일, 토요일임을 확인했는가?


### Promotion
1. - [x] 총주문 금액 10000원 이상부터 이벤트가 적용됨을 확인했는가?
2. - [x] 뱃지의 증정 기준은 '총혜택 금액'임을 확인했는가?


### OutputView
1. - [x] 총혜택 금액이 '할인 금액의 합계 + 증정 메뉴의 가격'임을 확인했는가?
2. - [x] 할인 후 예상 결제 금액이 '할인 전 총 주문 금액 - 할인 금액'임을 확인했는가?
3. - [x] 증정 이벤트에 해당하지 않으면 '없음'을 출력했는가?
4. - [x] 혜택 내역은 고객에게 적용된 이벤트 내역만 보여주었는가?
5. - [x] 적용된 이벤트가 없다면 '없음'을 출력하였는가? (증정도 이벤트)
6. - [x] 이벤트 배지가 없는 경우 '없음'을 출력하였는가?

</details>

<details>
<summary>프로그래밍 요구 사항</summary>

- [x] Node.js 18.17.1 버전에서 실행 가능한가?
- [x] 자바스크립트 코드 컨벤션을 지켰는가?
- [x] indent의 depth는 3을 넘지 않도록 구현하였는가?
- [x] Jest를 이용하여 정리한 기능 목록이 정상 동작함을 확인하였는가?
- [x] 함수(메서드)의 길이가 15라인을 넘어가지 않도록 구현하였는가?
- [x] else를 지양하였는가?
- [x] 도메인 로직에 대한 단위 테스트를 구현하였는가?
- [x] 핵심 로직과 UI 로직을 구분하였는가?
- [x] 프로그래밍 요구 사항에서 달리 명시하지 않는 한 파일, 패키지 이름을 수정하거나 이동하지 않았는가?
- [x] 사용자가 잘못된 값을 입력한 경우 throw를 통해 '[ERROR]'로 시작하는 예외를 발생시키고, 다시 입력받았는가?
- [x] InputView와 OutputView 객체를 활용해 구현하였는가?
- [x] Console.readLineAsync와 Console.print를 사용하여 구현하였는가? 
</details>


---
## 테스트 
- [테스트한 메서드 이름 : 테스트 이름] 으로 작성
- private 메서드는 다른 메서드 통해 간접적으로 테스트 될 수 있도록 작성
- 설명 뒤 `Day 1`은 요구사항 체크리스트의 Day 1번의 요구사항을 충족했는지 확인하는 테스트라는 의미

### DayTest
- **Day 클래스 테스트**
  - `getDayOfWeek` : 날짜 입력시 12월 기준으로 요일을 잘 반환하는지 테스트 
  - `isChristmasDay` : 날짜가 크리스마스 이벤트 기간에 해당하는지 확인하는 기능 테스트 -> `Discount 1`
  - `isWeekday` : 날짜가 평일인지(일-목)확인하는 기능 테스트 -> `Discount 2`
  - `isWeekend` : 날짜가 주말인지(금,토)확인하는 기능 테스트 -> `Discount 3`
  - `isSpecialDay` : 날짜가 특별 이벤트 기간인지 확인하는 기능 테스트
  - `getChristmasDiscount` : 날짜 기준으로 크리스마스 이벤트 할인 금액을 구하는 기능 테스트


- **Day 클래스 검증 테스트** (전체 `Day 2`)
  - `validateDay` : 날짜가 정수가 아니면 예외가 발생한다. / 날짜가 정수면 예외가 발생하지 않는다. -> `Day 1`
  - `validateDay` : 날짜가 1-31 사이의 숫자가 아니면 예외가 발생한다. / 날짜가 1-31 사이의 숫자이면 예외가 발생하지 않는다. -> `Day 1`


### ProductTest
- **Product 클래스 테스트** 
  - `getCountByCategory` : 카테고리 별로 메뉴의 개수를 세서 저장하는 기능(구매하는 기능) 테스트 
  - `getTotalPrice` : 총 주문 금액을 계산하는 기능 테스트 -> `Gift 1`
  - `isPriceLessThan` : 총 주문 금액이 입력값보다 작은지 확인하는 기능 테스트


- **Product 클래스 검증 테스트** (전체 `Product 5`)
  - `validateMenu` : 메뉴판에 있지 않은 음식의 이름이 입력되면 예외가 발생한다. / 메뉴판에 있는 음식의 이름이 입력되면 예외가 발생하지 않는다. -> `Product 1`
  - `validateMenu` : 주문한 메뉴의 수량이 숫자가 아니면 예외가 발생한다.
  - `validateMenu` : 주문한 메뉴의 각 수량이 1 이상 20 이하의 숫자가 아니면 예외가 발생한다. / ...숫자면 예외가 발생하지 않는다. -> `Product 2`
  - `validateMenu` : 주문한 메뉴의 총 수량이 1개 이상 20개 이하가 아니면 예외가 발생한다. / ...이하면 예외가 발생하지 않는다. -> `Product 7`
  - `validateMenu` : 음료만 주문시 예외가 발생한다. / ... 같이 주문시 예외가 발생하지 않는다. -> `Product 6`
  - `validateMenu` : 중복된 메뉴를 주문하는 경우 예외가 발생한다. / 중복되지 않은 메뉴를 주문하는 경우 예외가 발생하지 않는다. -> `Product 4`


### DiscountTest
- **Discount 클래스 테스트** 
  - `initAmountList` : 인스턴스 생성시 할인 금액 배열이 0으로 초기화 되는지 테스트
  - `getAmount` : 총 할인 금액을 구하는 기능 테스트
  - `isEmpty` : 총 할인 금액이 0인지 아닌지 구하는 기능 테스트

- **Discount 할인 이벤트 테스트**
  - `applyChristmasEvent` : 날짜가 1-25일 때 크리스마스 할인 이벤트가 날짜에 맞게 적용되는지 테스트 / ...적용되지 않는지 테스트 -> `Discount 1`
  - `applyWeekdayEvent` : 평일일 때(일-목) 평일 할인 이벤트인가 디저트 개수만큼 적용되는지 테스트 / ...평일이 아닐 때 적용되지 않는지 테스트 -> `Discount 2`
  - `applyWeekendEvent` : 주말일 때(금-토) 주말 할인 이벤트가 메인의 개수만큼 적용되는지 테스트 / ...주말이 아닐 때 적용되지 않는지 테스트 -> `Discount 3`
  - `applySpecialEvent` : 별이 있는 날일 때 특별할인이 적용되는지 테스트/ ...없는 날일 때 적용되지 않는지 테스트
  - `apply` : 여러가지 할인 이벤트가 제대로 적용되는지 테스트


### GiftTest
- **Gift 클래스 테스트 - 다른 클래스 메서드 mock으로 대체**
  - `getCount` : 주문 금액이 최소 금액을 넘었는지 여부에 따른 증정 이벤트 적용 테스트 -> `Gift 1`
  - `isEmpty` : 증정 이벤트가 적용되었는지 확인하는 기능 테스트


- **Gift 클래스 테스트 - 다른 클래스 이용해서 테스트**
  - `getCount` : 금액이 120,000 이상일 때 증정 이벤트가 적용되는지 테스트 / ...작을 때 적용되지 않는지 테스트 -> `Gift 1`
  - `isEmpty` : 금액이 120,000보다 크거나 작을 때 증정이 되었는지 확인하는 기능 테스트


### PromotionTest
- **Promotion 클래스 테스트 - 다른 클래스 mock으로 대체**
  - `getEventBenefitList`: 할인과 증정 금액 리스트를 합친 결과 리스트를 만드는 기능 테스트
  - `getTotalBenefitAmount`: 이벤트로 얻을 수 있는 총 할인 금액을 구하는 기능 테스트 -> `Promotion 2`
  - `getBadge`: 할인 금액을 바탕으로 배지를 구하는 기능 테스트 -> `Promotion 2`


- **Promotion 클래스 테스트 - 다른 클래스 사용해서 테스트**
  - `conductEvent`: 총 가격이 10000을 넘지 않으면 이벤트가 적용되지 않는지 테스트 -> `Promotion 1`
  - `getEventBenefitList`: 할인과 증정 금액 리스트를 합친 결과를 만드는 기능 테스트
  - `isEmpty`: 총 할인 금액이 0원인지 확인하는 기능 테스트
  - `getTotalBenefitAmount`: 이벤트로 얻을 수 있는 총 할인 금액을 구하는 기능 테스트 -> `Promotion 2`
  - `getBadge`: 할인 금액을 바탕으로 배지를 구하는 기능 테스트 -> `Promotion 2`


### EventPlannerTest
- **EventPlanner 클래스 테스트 (통합 테스트)** `OutputView 전체`, `Product 3`
  - `run` : 이벤트 플래너가 제대로 작동하는 경우 테스트 
  - `run` : 날짜 입력값에 예외가 발생하고 다시 입력받아 진행하는 경우 테스트
  - `run` : 메뉴 입력값에 예외가 발생하고 다시 입력받아 진행하는 경우 테스트


### ValidatorTest
- **Validator 검증 테스트**
  - `checkIsInteger` : 입력값이 정수가 아니면 예외가 발생한다. / 입력값이 정수이면 예외가 발생하지 않는다.
  - `checkIsValidDate` : 입력값이 1-31 사이의 값이 아니면 예외가 발생한다. / ...이면 예외가 발생하지 않는다.
  - `checkIsAllInteger` : 입력값 중 정수가 아닌 요소가 있으면 예외가 발생한다. / 입력값의 모든 요소가 정수이면 예외가 발생하지 않는다.
  - `checkIsNameInMenu` : 입력값 중 메뉴에 있는 이름이 아닌 요소가 있으면 예외가 발생한다. / 모두 메뉴에 있는 이름이면 예외가 발생하지 않는다.
  - `checkIsValidTotalCount` : 입력값이 1-20 사이의 값이 아니면 예외가 발생한다. / ...값이면 예외가 발생하지 않는다. 
  - `checkIsValidCount` : 입력값의 요소 중 1-20 사이의 값이 아닌 수가 있다면 예외가 발생한다. / ...값이면 예외가 발생하지 않는다.
  - `checkHasDuplicate` : 입력값 중 중복되는 요소가 있으면 예외가 발생한다. / 중복되는 요소가 없으면 예외가 발생하지 않는다.
  - `checkHasDrinkOnly` : 입력값 중 음료에 해당하는 메뉴만 있으면 예외가 발생한다. / 음료만 있지 않다면 예외가 발생하지 않는다.